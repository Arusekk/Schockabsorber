
import os
import struct
import zlib

buf=b'?\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfa\xaa\xab\xf0\x0f\x0f\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc\xfc??\xff\xff\xbf\xbf\xbf\xbf\xbf\xbf\xbf\xff\xffU^\xaf\xff\xfdUUW\xaf\xff\xf5UUU\xeb\xff\xf5UUU\xeb\xff\xf5UUU{\xff\xf5U\xf5U\x7f\xff\xf5U\xf5U\x7f\xff\xff\xff\xd5U\xff\xff\xff\xffUU\xfc\xff\x00=UW\xf0\xff\x00\xf5U_\xc0\xff\x00\xf5U{\xc0\xff\x00\xf5U\xeb\xc0\xff\x00\xf5U\xeb\xc0\xff\x00\xff\xff\xeb\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf5\xeb\xc0\xff\x00\xf5U\xeb\xc0\xff\x00\xf5U\xeb\xc0\xff\x00\xf5U\xef\xc0\xff\x00\xf5U\xff\x00\xff\x00\xff\xff\xfc\x00\xff\x00\xff\xff\xf0\x00\xff'
buf=b'\x16RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR\x86\x10\x00\x06B""""F\x00r""""""pB""""""@B""""""@r""""""p\x06B""""F\x00\x00\x16\x83RS\x86\x10\x00'


print(len(buf), len(buf)/14)

bpp = 4

tw = 14
h = len(buf)//tw
w = tw*8//bpp

dat=zlib.compress(b'\x00'+b'\x00'.join(buf[tw*a:][:tw] for a in range(h)))

bi = 255//((1<<bpp-1)-1)
palette = b''
for r in range(bpp):
    for g in range(bpp):
        for b in range(bpp):
            palette += struct.pack('BBB', r*bi,g*bi,b*bi)

wtf=[
        b'\x89PNG\r\n\x1a\n',
        b'IHDR'+struct.pack('>IIB', w, h, bpp)+b'\3\0\0\0',
        b'PLTE'+palette[:3<<bpp],
        b'IDAT'+dat,
        b'\0\0\0\0IEND\xaeB`\x82'
]
for x in 1,2,3:
    wtf[x] = struct.pack('>I', len(wtf[x])-4) + wtf[x] + struct.pack('>I', zlib.crc32(wtf[x]))

open('wtf.png','wb').write(b''.join(wtf))
os.system('gqview wtf.png')

